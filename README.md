# TSBot Mod â€” Minecraft Ã— TeamSpeak 3 è·¨å¹³å°ç‚¹æ­Œè”åŠ¨

<p align="center">
  <img src="https://img.shields.io/badge/Minecraft-1.20.1-brightgreen?style=flat-square&logo=minecraft" alt="Minecraft" />
  <img src="https://img.shields.io/badge/Forge-47.1.0-orange?style=flat-square" alt="Forge" />
  <img src="https://img.shields.io/badge/Java-17-blue?style=flat-square&logo=openjdk" alt="Java 17" />
  <img src="https://img.shields.io/badge/License-All%20Rights%20Reserved-red?style=flat-square" alt="License" />
</p>

> **TSBot Mod** æ˜¯ä¸€ä¸ªåŸºäº Minecraft Forge çš„æœåŠ¡ç«¯æ¨¡ç»„ã€‚å®ƒè‡´åŠ›äºæ‰“ç ´æ¸¸æˆä¸è¯­éŸ³è½¯ä»¶çš„å£å’ï¼Œè®©ç©å®¶åœ¨ MC æ¸¸æˆå†…å³å¯é€šè¿‡èŠå¤©æŒ‡ä»¤ï¼Œç›´æ¥æœç´¢ã€æ’­æ”¾å’Œæ§åˆ¶ TeamSpeak 3 é¢‘é“ä¸­çš„éŸ³ä¹æœºå™¨äººï¼Œå®ç°ã€ŒMC ç‚¹æ­Œ â†’ TS3 æ’­æ”¾ã€çš„ä¸æ»‘ä½“éªŒã€‚

âš ï¸ **å†™åœ¨å‰é¢**ï¼šæœ¬é¡¹ç›®æœ€åˆä¸ºæ»¡è¶³ä½œè€…ä¸ªäººæœåŠ¡å™¨éœ€æ±‚è€Œå¼€å‘ï¼Œå†…éƒ¨æ¶æ„è¾ƒä¸ºå¤æ‚ä¸”åŠŸèƒ½ä»åœ¨è¿­ä»£ä¸­ã€‚éƒ¨åˆ†æç«¯åœºæ™¯ä¸‹å¯èƒ½å­˜åœ¨ Bugï¼Œæ¬¢è¿é€šè¿‡ Issues æäº¤åé¦ˆæˆ– PR ååŠ©å®Œå–„ã€‚

---

## ğŸ’¡ é¡¹ç›®èƒŒæ™¯ä¸åŸç†

è®¸å¤šç¡¬æ ¸æ¸¸æˆç¤¾åŒºä¹ æƒ¯åŒæ—¶ä½¿ç”¨ Minecraft æœåŠ¡å™¨ä¸ TeamSpeak 3 è¿›è¡Œè¯­éŸ³æ²Ÿé€šã€‚å€ŸåŠ©ä¼˜ç§€çš„ [TS3AudioBot](https://github.com/Splamy/TS3AudioBot) åŠå…¶æ’ä»¶ï¼ŒTS3 é¢‘é“æœ¬èº«å·²å…·å¤‡å¼ºå¤§çš„ç‚¹æ­Œèƒ½åŠ›ã€‚

**ç—›ç‚¹åœ¨äº**ï¼šç©å®¶æ¯æ¬¡ç‚¹æ­Œã€åˆ‡æ­Œéƒ½å¿…é¡» `Alt + Tab` åˆ‡æ¢åˆ° TS3 å®¢æˆ·ç«¯ï¼Œä¸¥é‡æ‰“æ–­æ¸¸æˆæ²‰æµ¸æ„Ÿã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šTSBot Mod ä½œä¸ºæ¡¥æ¢ï¼Œå°†ç©å®¶åœ¨ MC èŠå¤©æ å†…çš„äº¤äº’ï¼Œç²¾å‡†åˆ†å‘ç»™éŸ³ä¹ APIï¼ˆè·å–æ•°æ®ï¼‰æˆ– TS3 ServerQueryï¼ˆæ‰§è¡Œæ’­æ”¾ï¼‰ï¼Œç©å®¶å®Œå…¨æ— éœ€ç¦»å¼€æ¸¸æˆç•Œé¢ã€‚

### æ ¸å¿ƒå·¥ä½œæµ

> [!WARNING]
> **âš ï¸ ä½¿ç”¨è¯¥æ¨¡ç»„å‰å¿…é¡»å®Œå…¨ç†è§£ä»¥ä¸‹æ¶æ„é€»è¾‘ï¼š**

æœ¬æ¨¡ç»„åœ¨åº•å±‚å°†æŒ‡ä»¤åˆ†ä¸º**â€œæœç´¢ç‚¹æ­Œâ€**ä¸**â€œåŸºç¡€æ§åˆ¶â€**ä¸¤æ¡ç‹¬ç«‹çš„æ•°æ®é“¾è·¯ï¼š

```mermaid
sequenceDiagram
    actor Player as MC ç©å®¶
    participant Mod as TSBot Mod (æœåŠ¡ç«¯)
    participant API as éŸ³ä¹ API (ç½‘æ˜“äº‘/QQ)
    participant TS3 as TS3AudioBot

    Note over Player, TS3: é“¾è·¯ä¸€ï¼šæœç´¢ä¸ç‚¹æ­Œæµç¨‹
    Player->>Mod: è¾“å…¥ /ts qq/wyy search xxx
    Mod->>API: [å¼‚æ­¥] è°ƒç”¨ HTTP æ¥å£æœç´¢
    API-->>Mod: è¿”å› JSON æœç´¢ç»“æœ
    Mod-->>Player: æ¸¸æˆå†…å±•ç¤ºæœç´¢ç»“æœåˆ—è¡¨
    Player->>Mod: ç‚¹å‡»èŠå¤©æ çš„ [æ’­æ”¾] æŒ‰é’®
    Mod->>TS3: é€šè¿‡ ServerQuery è½¬æ¢ä¸º !wyy/qq play xxx æŒ‡ä»¤

    Note over Player, TS3: é“¾è·¯äºŒï¼šæ§åˆ¶æµç¨‹ (å®Œå…¨ä¸ç»è¿‡éŸ³ä¹ API)
    Player->>Mod: è¾“å…¥ /ts pause æˆ– /ts next
    Mod->>TS3: é€šè¿‡ ServerQuery ç›´æ¥å‘é€ !pause / !next æŒ‡ä»¤
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„ä¸è®¾è®¡è¦ç‚¹

### ğŸ’¡ æ ¸å¿ƒè®¾è®¡äº®ç‚¹

* **ğŸš€ å®Œå…¨å¼‚æ­¥ (Non-blocking)**ï¼šè¿™æ˜¯æœ¬ Mod æœ€æ ¸å¿ƒçš„æ€§èƒ½ä¿éšœã€‚æ‰€æœ‰æ¶‰åŠè°ƒç”¨éŸ³ä¹ API çš„ç½‘ç»œ I/O æ“ä½œï¼Œå…¨éƒ¨é‡‡ç”¨ `CompletableFuture` å¼‚æ­¥æ‰§è¡Œï¼Œ**ç»ä¸é˜»å¡ Minecraft ä¸»çº¿ç¨‹**ï¼Œå³ä½¿ API å“åº”æ…¢ä¹Ÿå®Œå…¨ä¸ä¼šæ‹‰ä½æœåŠ¡å™¨çš„ TPSã€‚
* **ğŸ”Œ æç®€çš„æ§åˆ¶æµ**ï¼šå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå¯¹äºå•çº¯çš„æ§åˆ¶æŒ‡ä»¤ï¼ˆå¦‚åˆ‡æ­Œã€æš‚åœï¼‰ï¼Œæ¨¡ç»„ä¼šç›´æ¥é€šè¿‡ ServerQuery ä¸ TS3 é€šä¿¡ï¼Œé¿å…äº†å¤šä½™çš„ API è¯·æ±‚å¼€é”€ã€‚
* **âš™ï¸ TS3 åè®®æ·±åº¦å…¼å®¹**ï¼šæ²¡æœ‰ä¾èµ–è‡ƒè‚¿çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè€Œæ˜¯ä»åº•å±‚å®Œæ•´å®ç°äº† ServerQuery çš„è½¬ä¹‰è§„åˆ™ã€Welcome Banner æ¶ˆè€—æœºåˆ¶ä»¥åŠä¸¥æ ¼çš„é”®å€¼å¯¹è®¤è¯æµç¨‹ã€‚
* **ğŸ›¡ï¸ å¥å£®çš„å®¹é”™æœºåˆ¶**ï¼šé’ˆå¯¹è¿æ¥è¶…æ—¶ã€è®¤è¯å¤±è´¥ã€API å®•æœºæˆ–ç©ºé…ç½®ç­‰å¼‚å¸¸åœºæ™¯ï¼Œå‡åšäº†å®Œå¤‡çš„å¼‚å¸¸æ•è·ï¼Œå¹¶ä¼šåœ¨æ¸¸æˆå†…ç»™ç©å®¶æ˜ç¡®çš„æŠ¥é”™åé¦ˆã€‚

### æ¨¡å—æ¦‚è§ˆ

| æ ¸å¿ƒç±»å | æ ¸å¿ƒèŒè´£ |
| :--- | :--- |
| `TSBotMod` | Forge Mod å…¥å£ï¼ŒBrigadier å‘½ä»¤æ ‘æ³¨å†Œï¼Œæ¥æ”¶ç©å®¶æŒ‡ä»¤ |
| `MusicSearchService` | å¼‚æ­¥ HTTP æœç´¢å®ç°ï¼Œè´Ÿè´£è°ƒç”¨ç½‘æ˜“äº‘ / QQ éŸ³ä¹ API å¹¶è§£æç»“æœ |
| `PlayQueue` | æ’­æ”¾é˜Ÿåˆ—ç®¡ç†ï¼ŒåŒºåˆ†â€œç«‹å³æ’­æ”¾â€ä¸â€œå…¥é˜Ÿâ€ï¼Œå¹¶è´Ÿè´£å‘å…¨æœå¹¿æ’­é€šçŸ¥ |
| `TS3QueryClient` | TS3 ServerQuery åè®®åº•å±‚å®¢æˆ·ç«¯å®ç°ï¼Œè´Ÿè´£å‘é€ `!play` / `!next` ç­‰æŒ‡ä»¤ |

---

## âš ï¸ æ ¸å¿ƒå‰ç½®ä¾èµ–

> [!IMPORTANT]
> TSBot Mod ä»…ä»…æ˜¯æŒ‡ä»¤çš„â€œæ¬è¿å·¥â€ï¼Œå®é™…çš„æ’­æ”¾èƒ½åŠ›ä¾èµ–ä»¥ä¸‹é¡¹ç›®ï¼Œè¯·**åŠ¡å¿…å…ˆè¡Œå®Œæˆéƒ¨ç½²**ã€‚

1. **[TS3AudioBot-Plugin-Netease-QQ](https://github.com/RayQuantum/TS3AudioBot-Plugin-Netease-QQ) ï¼ˆæ ¸å¿ƒæ’­æ”¾å¼•æ“ï¼‰**
   * ç”± @RayQuantum å¼€å‘çš„ä¼˜ç§€æ’ä»¶ã€‚æ”¯æŒåŒå¹³å°æ’­æ”¾ã€VIP æ­Œæ›²ç™»å½•ã€æ­Œè¯ä¸å¤šç§æ’­æ”¾æ¨¡å¼ã€‚
   * **éƒ¨ç½²æŒ‡åŒ—**ï¼šæ¨èä½¿ç”¨ Docker éƒ¨ç½²ï¼Œè¯¦è§å…¶å®˜æ–¹ READMEã€‚
2. **[TS3AudioBot](https://github.com/Splamy/TS3AudioBot)**
   * TS3 éŸ³é¢‘æœºå™¨äººåº•å±‚æ¡†æ¶ï¼Œä¸Šè¿°æ’ä»¶çš„è¿è¡Œè½½ä½“ã€‚
3. **éŸ³ä¹ API æœåŠ¡ï¼ˆåŒç«¯å…±ç”¨ï¼‰**
   * [ç½‘æ˜“äº‘éŸ³ä¹ API (é»˜è®¤ç«¯å£ 3000)](https://github.com/Binaryify/NeteaseCloudMusicApi)
   * [QQ éŸ³ä¹ API (é»˜è®¤ç«¯å£ 3300)](https://github.com/jsososo/QQMusicApi)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

* ğŸ” **åŒæºæœç´¢**ï¼šæ”¯æŒç½‘æ˜“äº‘ / QQ éŸ³ä¹å…³é”®è¯æœç´¢ï¼Œç»“æœåœ¨ MC èŠå¤©æ ä»¥äº¤äº’å¼æ–‡æœ¬å±•ç¤ºã€‚
* â–¶ï¸ **å¿«æ·äº¤äº’**ï¼šæœç´¢ç»“æœè‡ªå¸¦ `[æ’­æ”¾]` ä¸ `[å…¥é˜Ÿ]` æ‚¬æµ®æŒ‰é’®ï¼Œç‚¹å‡»å³æ’­ã€‚
* â­ **åŸºç¡€æ§åˆ¶**ï¼šæ”¯æŒ `/ts next` (åˆ‡æ­Œ) ä¸ `/ts pause` (æš‚åœ/ç»§ç»­)ã€‚
* ğŸ“¢ **å…¨æœå¹¿æ’­**ï¼šç©å®¶ç‚¹æ­Œã€åˆ‡æ­Œæ—¶ï¼Œè§¦å‘å…¨æœåŠ¨æ€é€šçŸ¥ï¼ˆåŒ…å«æ“ä½œè€…ä¸æ­Œåï¼‰ï¼Œæ°›å›´æ„Ÿæ‹‰æ»¡ã€‚
* âš™ï¸ **å¼€ç®±å³ç”¨**ï¼šé¦–æ¬¡å¯åŠ¨è‡ªåŠ¨ç”Ÿæˆå¸¦æ³¨é‡Šçš„ `tsbot-config.toml`ã€‚
* ğŸ”“ **æ— æƒé™é—¨æ§›**ï¼šæ— éœ€ OP æƒé™ï¼Œå…¨ä½“åœ¨çº¿ç©å®¶å‡å¯ä½¿ç”¨ã€‚

---

## ğŸš€ éƒ¨ç½²æŒ‡å— (æœä¸»å‘)

### 1. å®‰è£… Mod
å‰å¾€ [Releases](https://github.com/CharyeahOwO/TSBot-Mod/releases) ä¸‹è½½æœ€æ–°ç‰ˆ `tsbotmod-x.x.x.jar`ï¼Œæ”¾å…¥ Minecraft æœåŠ¡ç«¯çš„ `mods/` æ–‡ä»¶å¤¹å¹¶å¯åŠ¨ä¸€æ¬¡æœåŠ¡å™¨ã€‚

### 2. ä¿®æ”¹é…ç½®
æœåŠ¡å™¨å¯åŠ¨åä¼šç”Ÿæˆ `config/tsbot-config.toml` æ–‡ä»¶ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µé…ç½®ï¼š

```toml
[General]
# TS3 ServerQuery è¿æ¥ä¿¡æ¯
host = "your-ts3-server.com"       # TS3 æœåŠ¡å™¨ IP/åŸŸå
port = 10011                       # ServerQuery ç«¯å£ (é»˜è®¤ 10011)
user = "serveradmin"               # ç®¡ç†å‘˜è´¦å·
password = "YOUR_PASSWORD"         # âš ï¸ æ³¨æ„ï¼šè¿™æ˜¯ Query å¯†ç ï¼Œéé¢‘é“å¯†ç ï¼

# é»˜è®¤éŸ³ä¹æº (wyy æˆ– qq)
default_source = "wyy"

# éŸ³ä¹ API åœ°å€ (éœ€åŒ…å« http:// ä¸”ä¸å¸¦å°¾æ–œæ )
netease_api = "[http://127.0.0.1:3000](http://127.0.0.1:3000)"
qq_api = "[http://127.0.0.1:3300](http://127.0.0.1:3300)"
```

### 3. éªŒè¯è¿æ¥
ä¿å­˜é…ç½®åé‡å¯æœåŠ¡ç«¯ï¼Œè‹¥æ§åˆ¶å°è¾“å‡ºä»¥ä¸‹å†…å®¹ï¼Œåˆ™ä»£è¡¨è¿æ¥æˆåŠŸï¼š
```log
[TSBotMod] TSBotMod V2.0 å·²åŠ è½½ï¼Œç­‰å¾…æœåŠ¡å™¨æŒ‡ä»¤ã€‚
[TSBotMod]   TS3 æœåŠ¡å™¨è¿æ¥å°±ç»ª...
[TSBotMod]   ç½‘æ˜“äº‘ API: æ­£å¸¸æ¥å…¥
[TSBotMod]   QQéŸ³ä¹ API: æ­£å¸¸æ¥å…¥
```

---

## ğŸ› ï¸ ä»æºç æ„å»º (å¼€å‘è€…å‘)

ç¯å¢ƒè¦æ±‚ï¼š**JDK 17** (å¿…é¡»)

```bash
git clone [https://github.com/CharyeahOwO/TSBot-Mod.git](https://github.com/CharyeahOwO/TSBot-Mod.git)
cd TSBot-Mod
# Linux / macOS
JAVA_HOME=/path/to/jdk17 ./gradlew build
# Windows
gradlew build -Dorg.gradle.java.home="C:\path\to\jdk17"
```
æ„å»ºäº§ç‰©ä½äº `build/libs/` ç›®å½•ä¸‹ã€‚

> [!WARNING]
> åˆ‡å‹¿ä½¿ç”¨ JDK 21 æˆ–æ›´é«˜ç‰ˆæœ¬è¿›è¡Œç¼–è¯‘ï¼Œå¦åˆ™ä¼šå¯¼è‡´ Forge åŠ è½½æ—¶æŠ›å‡º `Unsupported class file major version 65` å¼‚å¸¸ã€‚

---

## ğŸ“– æŒ‡ä»¤å‚è€ƒè¯å…¸

| æŒ‡ä»¤è¯­æ³• | åŠŸèƒ½è¯´æ˜ | ä½¿ç”¨ç¤ºä¾‹ |
| :--- | :--- | :--- |
| `/ts wyy search <å…³é”®è¯>` | æœç´¢ç½‘æ˜“äº‘éŸ³ä¹ | `/ts wyy search æ™´å¤©` |
| `/ts qq search <å…³é”®è¯>` | æœç´¢ QQ éŸ³ä¹ | `/ts qq search ä¸ƒé‡Œé¦™` |
| `/ts wyy play <ID>` | ç«‹å³æ’­æ”¾ (ç½‘æ˜“äº‘) | ç›´æ¥ç‚¹å‡»æœç´¢ç»“æœçš„ `[æ’­æ”¾]` |
| `/ts wyy add <ID>` | åŠ å…¥é˜Ÿåˆ— (ç½‘æ˜“äº‘) | ç›´æ¥ç‚¹å‡»æœç´¢ç»“æœçš„ `[å…¥é˜Ÿ]` |
| `/ts next` | åˆ‡æ¢ä¸‹ä¸€é¦– | `/ts next` |
| `/ts pause` | æš‚åœ / ç»§ç»­æ’­æ”¾ | `/ts pause` |

*æ³¨ï¼šä¸Šè¿°
